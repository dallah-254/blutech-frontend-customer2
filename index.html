<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blue Technology - Advanced Tech Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Orbitron:wght@600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0066cc;
            --primary-dark: #0052a3;
            --secondary: #00a8ff;
            --accent: #00d4ff;
            --dark: #1a1a2e;
            --darker: #0f0f1a;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --success: #28a745;
            --warning: #ffc107;
            --error: #dc3545;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--darker);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            cursor: pointer;
            border: none;
            font-family: inherit;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        /* Header Styles */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(135deg, var(--dark), var(--darker));
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            padding: 0.75rem 1rem;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 800;
            font-size: 1.2rem;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
        }

        .header-action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: var(--transition);
        }

        .header-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--error);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-bar {
            display: flex;
            margin-bottom: 0.5rem;
        }

        .search-bar input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9rem;
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-bar button {
            padding: 0 1rem;
            background: var(--primary);
            color: white;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            transition: var(--transition);
        }

        .search-bar button:hover {
            background: var(--primary-dark);
        }

        .nav-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-links {
            display: none;
            flex-direction: column;
            gap: 0;
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            z-index: 1000;
        }

        .nav-links.active {
            display: flex;
        }

        .nav-links li {
            list-style: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-links li:last-child {
            border-bottom: none;
        }

        .nav-links a,
        .nav-links button {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            transition: var(--transition);
            text-align: left;
            background: transparent;
            color: inherit;
            border: none;
            font: inherit;
            cursor: pointer;
        }

        .nav-links a:hover,
        .nav-links a.active,
        .nav-links button:hover {
            background: var(--primary);
            color: white;
        }

        .menu-toggle {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 24px;
            height: 18px;
            cursor: pointer;
        }

        .menu-toggle span {
            display: block;
            height: 2px;
            width: 100%;
            background: white;
            border-radius: 2px;
            transition: var(--transition);
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Main Content */
        main {
            padding: 1rem;
            max-width: 100%;
            overflow: hidden;
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-all {
            font-size: 0.9rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Carousel Styles */
        .carousel-container {
            position: relative;
            margin-bottom: 2rem;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s ease;
        }

        .carousel-slide {
            min-width: 100%;
            position: relative;
        }

        .carousel-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .carousel-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 1rem;
            color: white;
        }

        .carousel-content h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .carousel-content .price {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .carousel-cta {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .carousel-cta:hover {
            background: var(--primary-dark);
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: var(--transition);
        }

        .carousel-nav:hover {
            background: rgba(0, 0, 0, 0.7);
        }

        .carousel-nav.prev {
            left: 10px;
        }

        .carousel-nav.next {
            right: 10px;
        }

        .carousel-controls {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 8px;
            z-index: 10;
        }

        .carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transition: var(--transition);
        }

        .carousel-dot.active {
            background: white;
            transform: scale(1.2);
        }

        /* Horizontal Scroll Sections */
        .horizontal-scroll-section {
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .product-card, .service-card {
            min-width: 150px;
            background: var(--dark);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .product-card:hover, .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .image-container {
            position: relative;
            height: 120px;
            overflow: hidden;
        }

        .product-image, .service-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-image,
        .service-card:hover .service-image {
            transform: scale(1.05);
        }

        .discount-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--error);
            color: white;
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .product-info, .service-info {
            padding: 0.75rem;
        }

        .product-title, .service-title {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-price, .service-price {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .product-actions, .service-actions {
            display: flex;
            gap: 0.5rem;
        }

        .buy-now, .book-now {
            flex: 1;
            background: var(--primary);
            color: white;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            text-align: center;
            transition: var(--transition);
        }

        .buy-now:hover, .book-now:hover {
            background: var(--primary-dark);
        }

        /* Reviews Section */
        .reviews-section {
            margin-bottom: 2rem;
        }

        .reviews-grid {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .review-card {
            background: var(--dark);
            border-radius: var(--border-radius);
            padding: 1rem;
            box-shadow: var(--box-shadow);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .reviewer-info {
            flex: 1;
        }

        .reviewer-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .review-date {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .review-rating {
            display: flex;
            gap: 2px;
        }

        .review-rating i {
            color: var(--warning);
            font-size: 0.9rem;
        }

        .review-content p {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .show-more-btn {
            display: block;
            width: 100%;
            padding: 0.75rem;
            background: transparent;
            color: var(--secondary);
            border: 1px solid var(--secondary);
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
            margin-bottom: 1.5rem;
        }

        .show-more-btn:hover {
            background: rgba(0, 168, 255, 0.1);
        }

        .add-review {
            background: var(--dark);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
        }

        .add-review h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: inherit;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .submit-review {
            width: 100%;
            padding: 0.75rem;
            background: var(--primary);
            color: white;
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
        }

        .submit-review:hover {
            background: var(--primary-dark);
        }

        /* Footer */
        footer {
            background: var(--dark);
            padding: 2rem 1rem 1rem;
            position: relative;
            overflow: hidden;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--accent);
        }

        .footer-section p {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: var(--gray-light);
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-links a {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section ul li a {
            font-size: 0.9rem;
            color: var(--gray-light);
            transition: var(--transition);
        }

        .footer-section ul li a:hover {
            color: var(--accent);
            padding-left: 5px;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .contact-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .contact-item p {
            margin: 0;
            font-size: 0.9rem;
        }

        .copyright {
            text-align: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow-y: auto;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--dark);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 1.5rem 0;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.3rem;
            margin: 0;
        }

        .close-modal {
            background: none;
            color: var(--gray);
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .close-modal:hover {
            color: white;
        }

        .modal-body {
            padding: 0 1.5rem 1.5rem;
        }

        .modal-image-container {
            position: relative;
            height: 200px;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .modal-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: linear-gradient(45deg, #2a2a4a, #1a1a2e);
            color: var(--gray);
        }

        .image-placeholder i {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .modal-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .modal-discount {
            display: inline-block;
            background: var(--error);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .modal-description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-variations {
            margin-bottom: 1.5rem;
        }

        .variation-title {
            font-size: 1rem;
            margin-bottom: 0.75rem;
        }

        .variation-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .variation-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .variation-option input[type="radio"] {
            accent-color: var(--primary);
        }

        .variation-option label {
            font-size: 0.9rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .modal-buy-btn, .modal-book-btn {
            flex: 1;
            padding: 0.75rem;
            background: var(--primary);
            color: white;
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: var(--transition);
        }

        .modal-buy-btn:hover, .modal-book-btn:hover {
            background: var(--primary-dark);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 300px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            background: var(--error);
        }

        .toast.success {
            background: var(--success);
        }

        .toast-icon {
            font-size: 1.2rem;
        }

        /* Loading and Error States */
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            width: 100%;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state, .error-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            width: 100%;
        }

        .empty-state i, .error-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--gray);
        }

        .error-state i {
            color: var(--error);
        }

        .retry-btn {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
        }

        /* Responsive Adjustments */
        @media (min-width: 768px) {
            .nav-links {
                position: static;
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
                background: transparent;
                box-shadow: none;
            }

            .nav-links li {
                border-bottom: none;
            }

            .nav-links a,
            .nav-links button {
                width: auto;
                padding: 0.5rem 0.75rem;
            }

            .menu-toggle {
                display: none;
            }

            .footer-content {
                flex-direction: row;
                justify-content: space-between;
            }
            
            .footer-section {
                flex: 1;
            }
            
            .carousel-image {
                height: 250px;
            }
            
            .image-container {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-top">
            <div class="logo" onclick="window.location.href='index.html'">
                <div class="logo-icon">
                    <img src="http://bt-images-045854052038.s3-website-us-east-1.amazonaws.com/logo-b.png" alt="Blue Technology Logo" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <span class="logo-text">BLUE TECHNOLOGY</span>
            </div>
            
            <div class="header-actions">
                <div class="header-action-btn cart-button" onclick="window.location.href='cart.html'">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
                <div class="header-action-btn profile-button" onclick="window.location.href='profile.html'">
                    <i class="fas fa-user"></i>
                </div>
            </div>
        </div>
        
        <div class="search-bar">
            <input type="text" placeholder="Search products and services...">
            <button><i class="fas fa-search"></i></button>
        </div>
        
        <div class="nav-container">
            <button class="menu-toggle" id="menu-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-links">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <ul class="nav-links" id="nav-links">
                <li><a href="#" class="active">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="blog.html">Blog/Tips</a></li>
                <li><button class="theme-toggle" id="theme-toggle"><i class="fas fa-adjust"></i></button></li>
            </ul>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Featured Products Carousel Section -->
        <section class="carousel-section">
            <h2 class="section-title">Featured Products</h2>
            <div class="carousel-container">
                <div class="carousel-track" id="featured-products-carousel">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading featured products...</p>
                    </div>
                </div>
                <button class="carousel-nav prev"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-nav next"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-controls" id="products-carousel-controls">
                    <!-- Backend will populate this with dots based on product count -->
                </div>
            </div>
        </section>

        <!-- Products Horizontal Scroll Section -->
        <section class="horizontal-scroll-section">
            <div class="section-header">
                <h2 class="section-title">Our Products</h2>
                <a href="products.html" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="scroll-container" id="homepage-products-scroll">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading products...</p>
                </div>
            </div>
        </section>

        <!-- Services Horizontal Scroll Section -->
        <section class="horizontal-scroll-section">
            <div class="section-header">
                <h2 class="section-title">Our Services</h2>
                <a href="services.html" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="scroll-container" id="homepage-services-scroll">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading services...</p>
                </div>
            </div>
        </section>

        <!-- Reviews Section -->
        <section class="reviews-section">
            <h2 class="section-title">Customer Reviews</h2>
            <div class="reviews-grid" id="reviews-container">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading reviews...</p>
                </div>
            </div>
            
            <button class="show-more-btn" id="show-more-reviews" style="display: none;">Show More Reviews</button>
            
            <!-- Add Review Form -->
            <div class="add-review">
                <h3>Add Your Review</h3>
                <form class="review-form" id="review-form">
                    <div class="form-group">
                        <label for="reviewer-name">Your Name</label>
                        <input type="text" id="reviewer-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reviewer-email">Email Address</label>
                        <input type="email" id="reviewer-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="review-rating">Rating</label>
                        <select id="review-rating" class="form-control" required>
                            <option value="">Select Rating</option>
                            <option value="5">5 Stars</option>
                            <option value="4">4 Stars</option>
                            <option value="3">3 Stars</option>
                            <option value="2">2 Stars</option>
                            <option value="1">1 Star</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="review-content">Your Review</label>
                        <textarea id="review-content" class="form-control" required></textarea>
                    </div>
                    <button type="submit" class="submit-review">Submit Review</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Blue Tech</h3>
                <p>Blue Tech provides cutting-edge technology solutions and services to businesses and individuals worldwide. We're committed to excellence and innovation.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Contact Us</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <p>123 Tech Street Nairobi, Kenya</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <p>Mon-Fri, 9am-5pm EAT</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <p>info@bluetech.co.ke</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2025 Blue Tech. All rights reserved.</p>
        </div>
    </footer>

    <!-- Product/Service Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalProductTitle"></h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img src="" alt="Product Image" class="modal-image" id="modalProductImage">
                    <div class="image-placeholder" id="modalProductImagePlaceholder" style="display: none;">
                        <i class="fas fa-image"></i>
                        <span>No Image Available</span>
                    </div>
                </div>
                <div class="modal-price" id="modalProductPrice"></div>
                <div class="modal-discount" id="modalProductDiscount" style="display: none;"></div>
                <p class="modal-description" id="modalProductDescription"></p>
                
                <div class="modal-variations" id="modalProductVariations" style="display: none;">
                    <h4 class="variation-title">Available Variations</h4>
                    <div class="variation-options" id="modalProductVariationOptions">
                        <!-- Backend will populate variation options -->
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-buy-btn" id="modalBuyBtn">Buy Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Modal -->
    <div class="modal" id="serviceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalServiceTitle"></h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img src="" alt="Service Image" class="modal-image" id="modalServiceImage">
                    <div class="image-placeholder" id="modalServiceImagePlaceholder" style="display: none;">
                        <i class="fas fa-image"></i>
                        <span>No Image Available</span>
                    </div>
                </div>
                <div class="modal-price" id="modalServicePrice"></div>
                <p class="modal-description" id="modalServiceDescription"></p>
                
                <div class="modal-variations" id="modalServiceVariations" style="display: none;">
                    <h4 class="variation-title">Service Options</h4>
                    <div class="variation-options" id="modalServiceVariationOptions">
                        <!-- Backend will populate service options -->
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-book-btn" id="modalBookBtn">Book Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon"><i class="fas fa-info-circle"></i></span>
        <span class="toast-message" id="toast-message"></span>
    </div>

    <script>
        // API endpoints - unchanged from original
        const API_BASE_URL = 'https://blutech-backend2.onrender.com';
        const API_ENDPOINTS = {
            FEATURED_PRODUCTS: `${API_BASE_URL}/api/products/carousel`,
            FEATURED_SERVICES: `${API_BASE_URL}/api/services/carousel`,
            PRODUCTS: `${API_BASE_URL}/api/products?limit=10`,
            SERVICES: `${API_BASE_URL}/api/services?limit=10`,
            REVIEWS: `${API_BASE_URL}/api/reviews`,
            SUBMIT_REVIEW: `${API_BASE_URL}/api/reviews/submit`,
            PRODUCT_DETAILS: `${API_BASE_URL}/api/products/`,
            SERVICE_DETAILS: `${API_BASE_URL}/api/services/`,
            ADD_TO_CART: `${API_BASE_URL}/api/cart/`
        };

        // DOM elements
        const menuToggle = document.getElementById('menu-toggle');
        const navLinks = document.getElementById('nav-links');
        const featuredProductsCarousel = document.getElementById('featured-products-carousel');
        const productsScroll = document.getElementById('homepage-products-scroll');
        const servicesScroll = document.getElementById('homepage-services-scroll');
        const reviewsContainer = document.getElementById('reviews-container');
        const showMoreReviewsBtn = document.getElementById('show-more-reviews');
        const reviewForm = document.getElementById('review-form');
        const productModal = document.getElementById('productModal');
        const serviceModal = document.getElementById('serviceModal');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const cartCount = document.querySelector('.cart-count');

        // State variables
        let currentReviewsPage = 1;
        let hasMoreReviews = true;
        let featuredProductsCarouselInstance = null;
        let featuredServicesCarouselInstance = null;

        // Generate a session ID for cart if not exists
        function getSessionId() {
            let sessionId = localStorage.getItem('sessionId');
            if (!sessionId) {
                sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('sessionId', sessionId);
            }
            return sessionId;
        }
        
        const sessionId = getSessionId();

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadFeaturedProducts();
            loadProducts();
            loadServices();
            loadReviews();
            updateCartCount();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Mobile menu toggle
            menuToggle.addEventListener('click', function() {
                const isOpen = this.classList.toggle('active');
                navLinks.classList.toggle('active');
                this.setAttribute('aria-expanded', isOpen);
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.nav-container')) {
                    menuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            });
            
            // Review form submission
            reviewForm.addEventListener('submit', handleReviewSubmit);
            
            // Show more reviews button
            showMoreReviewsBtn.addEventListener('click', loadMoreReviews);
            
            // Modal close buttons
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                });
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === productModal) {
                    productModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
                if (event.target === serviceModal) {
                    serviceModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // Universal Carousel Class
        class UniversalCarousel {
            constructor(container, options = {}) {
                this.container = container;
                this.track = container.querySelector('.carousel-track');
                this.slides = container.querySelectorAll('.carousel-slide');
                this.dots = container.querySelectorAll('.carousel-dot');
                this.prevBtn = container.querySelector('.carousel-nav.prev');
                this.nextBtn = container.querySelector('.carousel-nav.next');
                
                // Options with defaults
                this.options = {
                    autoplay: options.autoplay || true,
                    interval: options.interval || 5000,
                    loop: options.loop !== undefined ? options.loop : true,
                    ...options
                };
                
                this.currentIndex = 0;
                this.timer = null;
                this.isTransitioning = false;
                
                this.init();
            }
            
            init() {
                // Set up event listeners
                if (this.prevBtn) {
                    this.prevBtn.addEventListener('click', () => this.prev());
                }
                
                if (this.nextBtn) {
                    this.nextBtn.addEventListener('click', () => this.next());
                }
                
                // Dot navigation
                if (this.dots.length) {
                    this.dots.forEach((dot, index) => {
                        dot.addEventListener('click', () => this.goTo(index));
                    });
                }
                
                // Keyboard navigation
                this.container.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.prev();
                    if (e.key === 'ArrowRight') this.next();
                });
                
                // Swipe support for touch devices
                this.setupSwipe();
                
                // Start autoplay if enabled
                if (this.options.autoplay) {
                    this.startAutoplay();
                }
                
                // Pause autoplay when hovering over carousel
                this.container.addEventListener('mouseenter', () => {
                    if (this.options.autoplay) {
                        this.stopAutoplay();
                    }
                });
                
                this.container.addEventListener('mouseleave', () => {
                    if (this.options.autoplay) {
                        this.startAutoplay();
                    }
                });
                
                // Make carousel focusable for keyboard navigation
                this.container.setAttribute('tabindex', '0');
                
                // Initialize first slide
                this.update();
            }
            
            setupSwipe() {
                let startX = 0;
                let endX = 0;
                
                this.container.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                }, { passive: true });
                
                this.container.addEventListener('touchmove', (e) => {
                    endX = e.touches[0].clientX;
                }, { passive: true });
                
                this.container.addEventListener('touchend', () => {
                    const diffX = startX - endX;
                    
                    if (Math.abs(diffX) > 50) { // Minimum swipe distance
                        if (diffX > 0) {
                            this.next();
                        } else {
                            this.prev();
                        }
                    }
                });
            }
            
            startAutoplay() {
                if (this.timer) clearInterval(this.timer);
                
                this.timer = setInterval(() => {
                    this.next();
                }, this.options.interval);
            }
            
            stopAutoplay() {
                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }
            }
            
            next() {
                if (this.isTransitioning) return;
                
                this.isTransitioning = true;
                
                if (this.currentIndex >= this.slides.length - 1 && this.options.loop) {
                    this.currentIndex = 0;
                } else if (this.currentIndex < this.slides.length - 1) {
                    this.currentIndex++;
                }
                
                this.update();
                
                // Reset transitioning flag after animation completes
                setTimeout(() => {
                    this.isTransitioning = false;
                }, 500);
            }
            
            prev() {
                if (this.isTransitioning) return;
                
                this.isTransitioning = true;
                
                if (this.currentIndex <= 0 && this.options.loop) {
                    this.currentIndex = this.slides.length - 1;
                } else if (this.currentIndex > 0) {
                    this.currentIndex--;
                }
                
                this.update();
                
                // Reset transitioning flag after animation completes
                setTimeout(() => {
                    this.isTransitioning = false;
                }, 500);
            }
            
            goTo(index) {
                if (this.isTransitioning || index === this.currentIndex) return;
                
                this.isTransitioning = true;
                this.currentIndex = index;
                this.update();
                
                // Reset transitioning flag after animation completes
                setTimeout(() => {
                    this.isTransitioning = false;
                }, 500);
            }
            
            update() {
                // Update track position
                this.track.style.transform = `translateX(-${this.currentIndex * 100}%)`;
                
                // Update dots
                if (this.dots.length) {
                    this.dots.forEach((dot, index) => {
                        if (index === this.currentIndex) {
                            dot.classList.add('active');
                        } else {
                            dot.classList.remove('active');
                        }
                    });
                }
                
                // Dispatch custom event
                this.container.dispatchEvent(new CustomEvent('carouselChange', {
                    detail: { currentIndex: this.currentIndex }
                }));
            }
            
            destroy() {
                this.stopAutoplay();
                
                if (this.prevBtn) {
                    this.prevBtn.removeEventListener('click', () => this.prev());
                }
                
                if (this.nextBtn) {
                    this.nextBtn.removeEventListener('click', () => this.next());
                }
                
                if (this.dots.length) {
                    this.dots.forEach((dot, index) => {
                        dot.removeEventListener('click', () => this.goTo(index));
                    });
                }
            }
        }

        // Update cart count
        async function updateCartCount() {
            try {
                const response = await fetch(`${API_ENDPOINTS.ADD_TO_CART}${sessionId}`);
                if (!response.ok) throw new Error('Failed to fetch cart');
                
                const cart = await response.json();
                const totalItems = cart.items.reduce((total, item) => total + item.quantity, 0);
                cartCount.textContent = totalItems;
            } catch (error) {
                console.error('Error updating cart count:', error);
            }
        }

        // Load featured products for carousel
        async function loadFeaturedProducts() {
            try {
                // Show loading state
                featuredProductsCarousel.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading featured products...</p>
                    </div>
                `;
                
                // Fetch featured products from backend
                const response = await fetch(API_ENDPOINTS.FEATURED_PRODUCTS);
                if (!response.ok) throw new Error('Failed to fetch featured products');
                
                const products = await response.json();
                
                if (products.length === 0) {
                    featuredProductsCarousel.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-box-open"></i>
                            <p>No featured products available.</p>
                        </div>
                    `;
                    return;
                }
                
                // Render featured products carousel
                renderFeaturedProductsCarousel(products);
                
                // Initialize carousel
                if (featuredProductsCarouselInstance) {
                    featuredProductsCarouselInstance.destroy();
                }
                
                const carouselContainer = document.querySelector('.carousel-container');
                featuredProductsCarouselInstance = new UniversalCarousel(carouselContainer);
            } catch (error) {
                console.error('Error loading featured products:', error);
                featuredProductsCarousel.innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Failed to load featured products. Please try again later.</p>
                        <button onclick="loadFeaturedProducts()" class="retry-btn">Retry</button>
                    </div>
                `;
            }
        }

        // Render featured products carousel
        function renderFeaturedProductsCarousel(products) {
            let html = '';
            
            products.forEach(product => {
                // Ensure the image URL is properly formatted
                let imageUrl = product.image;
                if (imageUrl && !imageUrl.startsWith('http')) {
                    imageUrl = API_BASE_URL + imageUrl;
                }
                
                html += `
                    <div class="carousel-slide" data-product-id="${product._id}">
                        ${product.image ? 
                            `<img src="${imageUrl}" alt="${product.name}" class="carousel-image" onerror="handleImageError(this)">` : 
                            `<div class="image-placeholder"><i class="fas fa-image"></i> No Image</div>`
                        }
                        <div class="carousel-content">
                            <h3>${product.name}</h3>
                            <div class="price">${product.price}</div>
                            <button class="carousel-cta view-details" data-product-id="${product._id}">View Details</button>
                        </div>
                    </div>
                `;
            });
            
            featuredProductsCarousel.innerHTML = html;
            
            // Add event listeners to view details buttons
            featuredProductsCarousel.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = this.getAttribute('data-product-id');
                    openProductModal(productId);
                });
            });
            
            // Add event listeners to carousel slides
            featuredProductsCarousel.querySelectorAll('.carousel-slide').forEach(slide => {
                slide.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product-id');
                    openProductModal(productId);
                });
            });
            
            // Create carousel dots
            const controlsContainer = document.getElementById('products-carousel-controls');
            controlsContainer.innerHTML = '';
            
            for (let i = 0; i < products.length; i++) {
                const dot = document.createElement('div');
                dot.className = 'carousel-dot';
                if (i === 0) dot.classList.add('active');
                dot.setAttribute('data-slide', i);
                controlsContainer.appendChild(dot);
            }
        }

        // Load products for horizontal scroll
        async function loadProducts() {
            try {
                // Show loading state
                productsScroll.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading products...</p>
                    </div>
                `;
                
                // Fetch products from backend
                const response = await fetch(API_ENDPOINTS.PRODUCTS);
                if (!response.ok) throw new Error('Failed to fetch products');
                
                const data = await response.json();
                const products = data.products || data;
                
                if (products.length === 0) {
                    productsScroll.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-box-open"></i>
                            <p>No products available at the moment.</p>
                        </div>
                    `;
                    return;
                }
                
                // Render products scroll
                renderProductsScroll(products);
            } catch (error) {
                console.error('Error loading products:', error);
                productsScroll.innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Failed to load products. Please try again later.</p>
                        <button onclick="loadProducts()" class="retry-btn">Retry</button>
                    </div>
                `;
            }
        }

        // Render products horizontal scroll
        function renderProductsScroll(products) {
            let html = '';
            
            products.forEach(product => {
                // Ensure the image URL is properly formatted
                let imageUrl = product.image;
                if (imageUrl && !imageUrl.startsWith('http')) {
                    imageUrl = API_BASE_URL + imageUrl;
                }
                
                html += `
                    <div class="product-card" data-product-id="${product._id}">
                        ${product.discount ? `<div class="discount-badge">${product.discount}% OFF</div>` : ''}
                        <div class="image-container">
                            ${product.image ? 
                                `<img src="${imageUrl}" alt="${product.name}" class="product-image" onerror="handleImageError(this)">` : 
                                `<div class="image-placeholder"><i class="fas fa-image"></i> No Image</div>`
                            }
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <div class="product-price">${product.price}</div>
                            <div class="product-actions">
                                <button class="buy-now" data-product-id="${product._id}">Buy Now</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            productsScroll.innerHTML = html;
            
            // Add event listeners to buy now buttons
            productsScroll.querySelectorAll('.buy-now').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = this.getAttribute('data-product-id');
                    openProductModal(productId);
                });
            });
            
            // Add event listeners to product cards
            productsScroll.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product-id');
                    openProductModal(productId);
                });
            });
        }

        // Load services for horizontal scroll
        async function loadServices() {
            try {
                // Show loading state
                servicesScroll.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading services...</p>
                    </div>
                `;
                
                // Fetch services from backend
                const response = await fetch(API_ENDPOINTS.SERVICES);
                if (!response.ok) throw new Error('Failed to fetch services');
                
                const services = await response.json();
                
                if (services.length === 0) {
                    servicesScroll.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-concierge-bell"></i>
                            <p>No services available at the moment.</p>
                        </div>
                    `;
                    return;
                }
                
                // Render services scroll
                renderServicesScroll(services);
            } catch (error) {
                console.error('Error loading services:', error);
                servicesScroll.innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Failed to load services. Please try again later.</p>
                        <button onclick="loadServices()" class="retry-btn">Retry</button>
                    </div>
                `;
            }
        }

        // Render services horizontal scroll
        function renderServicesScroll(services) {
            let html = '';
            
            services.forEach(service => {
                // Ensure the image URL is properly formatted
                let imageUrl = service.image;
                if (imageUrl && !imageUrl.startsWith('http')) {
                    imageUrl = API_BASE_URL + imageUrl;
                }
                
                html += `
                    <div class="service-card" data-service-id="${service._id}">
                        <div class="image-container">
                            ${service.image ? 
                                `<img src="${imageUrl}" alt="${service.name}" class="service-image" onerror="handleImageError(this)">` : 
                                `<div class="image-placeholder"><i class="fas fa-image"></i> No Image</div>`
                            }
                        </div>
                        <div class="service-info">
                            <h3 class="service-title">${service.name}</h3>
                            <div class="service-price">${service.price}</div>
                            <div class="service-actions">
                                <button class="book-now" data-service-id="${service._id}">Book Now</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            servicesScroll.innerHTML = html;
            
            // Add event listeners to book now buttons
            servicesScroll.querySelectorAll('.book-now').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const serviceId = this.getAttribute('data-service-id');
                    openServiceModal(serviceId);
                });
            });
            
            // Add event listeners to service cards
            servicesScroll.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', function() {
                    const serviceId = this.getAttribute('data-service-id');
                    openServiceModal(serviceId);
                });
            });
        }

        // Load reviews
        async function loadReviews() {
            try {
                // Show loading state
                reviewsContainer.innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading reviews...</p>
                    </div>
                `;
                
                // Fetch reviews from backend
                const response = await fetch(`${API_ENDPOINTS.REVIEWS}?page=${currentReviewsPage}&limit=3`);
                if (!response.ok) throw new Error('Failed to fetch reviews');
                
                const data = await response.json();
                const reviews = data.reviews || [];
                hasMoreReviews = data.hasMore || false;
                
                if (reviews.length === 0) {
                    reviewsContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-comments"></i>
                            <p>No reviews yet. Be the first to review!</p>
                        </div>
                    `;
                    showMoreReviewsBtn.style.display = 'none';
                    return;
                }
                
                // Render reviews
                renderReviews(reviews);
                
                // Show or hide "Show More" button
                showMoreReviewsBtn.style.display = hasMoreReviews ? 'block' : 'none';
            } catch (error) {
                console.error('Error loading reviews:', error);
                reviewsContainer.innerHTML = `
                    <div class="error-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Failed to load reviews. Please try again later.</p>
                        <button onclick="loadReviews()" class="retry-btn">Retry</button>
                    </div>
                `;
                showMoreReviewsBtn.style.display = 'none';
            }
        }

        // Load more reviews
        async function loadMoreReviews() {
            currentReviewsPage++;
            
            try {
                // Fetch more reviews from backend
                const response = await fetch(`${API_ENDPOINTS.REVIEWS}?page=${currentReviewsPage}&limit=3`);
                if (!response.ok) throw new Error('Failed to fetch more reviews');
                
                const data = await response.json();
                const reviews = data.reviews || [];
                hasMoreReviews = data.hasMore || false;
                
                if (reviews.length > 0) {
                    // Append new reviews
                    renderReviews(reviews, true);
                }
                
                // Show or hide "Show More" button
                showMoreReviewsBtn.style.display = hasMoreReviews ? 'block' : 'none';
            } catch (error) {
                console.error('Error loading more reviews:', error);
                showToast('Failed to load more reviews', 'error');
                currentReviewsPage--; // Revert page number on error
            }
        }

        // Render reviews
        function renderReviews(reviews, append = false) {
            let html = '';
            
            reviews.forEach(review => {
                // Generate star rating HTML
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    starsHtml += `<i class="fas fa-star${i <= review.rating ? ' active' : ''}"></i>`;
                }
                
                html += `
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer-info">
                                <div class="reviewer-name">${review.name}</div>
                                <div class="review-date">${new Date(review.date).toLocaleDateString()}</div>
                            </div>
                            <div class="review-rating">
                                ${starsHtml}
                            </div>
                        </div>
                        <div class="review-content">
                            <p>${review.content}</p>
                        </div>
                    </div>
                `;
            });
            
            if (append) {
                reviewsContainer.innerHTML += html;
            } else {
                reviewsContainer.innerHTML = html;
            }
        }

        // Handle review form submission
        async function handleReviewSubmit(e) {
            e.preventDefault();
            
            const name = document.getElementById('reviewer-name').value;
            const email = document.getElementById('reviewer-email').value;
            const rating = document.getElementById('review-rating').value;
            const content = document.getElementById('review-content').value;
            
            // Validate form
            if (!name || !email || !rating || !content) {
                showToast('Please fill all fields', 'error');
                return;
            }
            
            try {
                // Submit review to backend
                const response = await fetch(API_ENDPOINTS.SUBMIT_REVIEW, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name,
                        email,
                        rating: parseInt(rating),
                        content
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Failed to submit review');
                }
                
                // Clear form and show success message
                reviewForm.reset();
                showToast('Review submitted successfully! It will appear after approval.', 'success');
                
                // Reload reviews if it's the first review
                if (currentReviewsPage === 1) {
                    loadReviews();
                }
            } catch (error) {
                console.error('Error submitting review:', error);
                showToast(error.message || 'Failed to submit review', 'error');
            }
        }

        // Open product modal
        async function openProductModal(productId) {
            try {
                // Show loading state in modal
                document.getElementById('modalProductTitle').textContent = 'Loading...';
                document.getElementById('modalProductDescription').textContent = 'Loading product details...';
                document.getElementById('modalProductPrice').textContent = '';
                document.getElementById('modalProductDiscount').style.display = 'none';
                document.getElementById('modalProductVariationOptions').innerHTML = '';
                
                // Show modal
                productModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Fetch product details from backend
                const response = await fetch(`${API_ENDPOINTS.PRODUCT_DETAILS}${productId}`);
                if (!response.ok) throw new Error('Failed to fetch product details');
                
                const product = await response.json();
                
                // Populate modal with product details
                document.getElementById('modalProductTitle').textContent = product.name;
                document.getElementById('modalProductDescription').textContent = product.description;
                document.getElementById('modalProductPrice').textContent = product.price;
                
                // Show discount if available
                if (product.discount && product.discount > 0) {
                    document.getElementById('modalProductDiscount').style.display = 'block';
                    document.getElementById('modalProductDiscount').textContent = `${product.discount}% OFF`;
                } else {
                    document.getElementById('modalProductDiscount').style.display = 'none';
                }
                
                // Set product image
                const productImage = document.getElementById('modalProductImage');
                const productImagePlaceholder = document.getElementById('modalProductImagePlaceholder');
                
                // Ensure the image URL is properly formatted
                let imageUrl = product.image;
                if (imageUrl && !imageUrl.startsWith('http')) {
                    imageUrl = API_BASE_URL + imageUrl;
                }
                
                if (product.image) {
                    productImage.src = imageUrl;
                    productImage.style.display = 'block';
                    productImagePlaceholder.style.display = 'none';
                } else {
                    productImage.style.display = 'none';
                    productImagePlaceholder.style.display = 'flex';
                }
                
                // Populate variations if available
                const variationsContainer = document.getElementById('modalProductVariationOptions');
                if (product.variations && product.variations.length > 0) {
                    document.getElementById('modalProductVariations').style.display = 'block';
                    
                    let variationsHtml = '';
                    product.variations.forEach((variation, index) => {
                        variationsHtml += `
                            <div class="variation-option">
                                <input type="radio" id="variation-${index}" name="product-variation" value="${variation.name}" data-price="${variation.price}" ${index === 0 ? 'checked' : ''}>
                                <label for="variation-${index}">${variation.name} - ${variation.price}</label>
                            </div>
                        `;
                    });
                    
                    variationsContainer.innerHTML = variationsHtml;
                } else {
                    document.getElementById('modalProductVariations').style.display = 'none';
                }
                
                // Set up buy now button
                const buyNowBtn = document.getElementById('modalBuyBtn');
                buyNowBtn.onclick = function() {
                    addProductToCart(product);
                };
            } catch (error) {
                console.error('Error opening product modal:', error);
                showToast('Failed to load product details', 'error');
                productModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Open service modal
        async function openServiceModal(serviceId) {
            try {
                // Show loading state in modal
                document.getElementById('modalServiceTitle').textContent = 'Loading...';
                document.getElementById('modalServiceDescription').textContent = 'Loading service details...';
                document.getElementById('modalServicePrice').textContent = '';
                document.getElementById('modalServiceVariationOptions').innerHTML = '';
                
                // Show modal
                serviceModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Fetch service details from backend
                const response = await fetch(`${API_ENDPOINTS.SERVICE_DETAILS}${serviceId}`);
                if (!response.ok) throw new Error('Failed to fetch service details');
                
                const service = await response.json();
                
                // Populate modal with service details
                document.getElementById('modalServiceTitle').textContent = service.name;
                document.getElementById('modalServiceDescription').textContent = service.description;
                document.getElementById('modalServicePrice').textContent = service.price;
                
                // Set service image
                const serviceImage = document.getElementById('modalServiceImage');
                const serviceImagePlaceholder = document.getElementById('modalServiceImagePlaceholder');
                
                // Ensure the image URL is properly formatted
                let imageUrl = service.image;
                if (imageUrl && !imageUrl.startsWith('http')) {
                    imageUrl = API_BASE_URL + imageUrl;
                }
                
                if (service.image) {
                    serviceImage.src = imageUrl;
                    serviceImage.style.display = 'block';
                    serviceImagePlaceholder.style.display = 'none';
                } else {
                    serviceImage.style.display = 'none';
                    serviceImagePlaceholder.style.display = 'flex';
                }
                
                // Populate options if available
                const optionsContainer = document.getElementById('modalServiceVariationOptions');
                if (service.options && service.options.length > 0) {
                    document.getElementById('modalServiceVariations').style.display = 'block';
                    
                    let optionsHtml = '';
                    service.options.forEach((option, index) => {
                        optionsHtml += `
                            <div class="variation-option">
                                <input type="radio" id="option-${index}" name="service-option" value="${option.name}" data-price="${option.price}" ${index === 0 ? 'checked' : ''}>
                                <label for="option-${index}">${option.name} - ${option.price}</label>
                            </div>
                        `;
                    });
                    
                    optionsContainer.innerHTML = optionsHtml;
                } else {
                    document.getElementById('modalServiceVariations').style.display = 'none';
                }
                
                // Set up book now button
                const bookNowBtn = document.getElementById('modalBookBtn');
                bookNowBtn.onclick = function() {
                    window.location.href = 'bookings.html';
                };
            } catch (error) {
                console.error('Error opening service modal:', error);
                showToast('Failed to load service details', 'error');
                serviceModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Add product to cart
        async function addProductToCart(product) {
            try {
                // Get selected variation if available
                let selectedVariation = '';
                let selectedPrice = product.price;
                
                if (product.variations && product.variations.length > 0) {
                    const selectedOption = document.querySelector('input[name="product-variation"]:checked');
                    if (selectedOption) {
                        selectedVariation = selectedOption.value;
                        selectedPrice = selectedOption.getAttribute('data-price');
                    }
                }
                
                // Add to cart via backend API
                const response = await fetch(`${API_ENDPOINTS.ADD_TO_CART}${sessionId}/add`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        productId: product._id,
                        quantity: 1,
                        variation: selectedVariation,
                        price: selectedPrice,
                        name: product.name,
                        image: product.image
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Failed to add to cart');
                }
                
                // Close modal and show success message
                productModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                
                showToast('Product added to cart successfully!', 'success');
                
                // Update cart count
                updateCartCount();
            } catch (error) {
                console.error('Error adding to cart:', error);
                showToast(error.message || 'Failed to add to cart', 'error');
            }
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            toast.className = 'toast';
            toast.classList.add(type);
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Handle image loading errors
        function handleImageError(img) {
            img.style.display = 'none';
            const placeholder = document.createElement('div');
            placeholder.className = 'image-placeholder';
            placeholder.innerHTML = '<i class="fas fa-image"></i> No Image Available';
            img.parentNode.appendChild(placeholder);
        }
    </script>
</body>
</html>